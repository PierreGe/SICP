(+ 1 1)
(define p1 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 1 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p2 (+ input 1))) (newline) (display "Reached end of p1") (newline) )))
(define p2 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 2 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p3 (+ input 1))) (newline) (display input) (newline) (display "Reached end of p2") (newline) )))
(define p3 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 3 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p1 (+ input 1))) (newline) (display "Reached end of p3") (newline) )))
(define p4 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 1 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p5 (+ input 1))) (newline) (display "Reached end of p4") (newline) )))
(define p5 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 2 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p6 (+ input 1))) (newline) (display "Reached end of p5") (newline) )))
(define p6 (new-process (lambda (input) (+ 1 1) (newline) (display "Tick 3 ") (newline) (display "input : ") (display input) (newline) (set! input (transfer p4 (+ input 1))) (newline) (display "Reached end of p6") (newline) )))
(transfer p1 0)
(+ 1 1)
(transfer p4 10)
(transfer p2 99)
(transfer p1 0)
(transfer p1 0)
(exit)
